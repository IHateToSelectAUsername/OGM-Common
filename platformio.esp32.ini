[ESP32] ; Base for Develop & Releases
extends = BASE, ESP32_4MB
platform = espressif32 @ ^6.7.0
board_build.filesystem = littlefs
framework = arduino
extra_scripts =
  lib/OGM-Common/scripts/pio/prepare.py
  lib/OGM-Common/scripts/pio/create_esp32_image.py
build_flags =
  ${BASE.build_flags}
monitor_filters =
  esp32_exception_decoder
  ${env.monitor_filters}

; default debuger jtag
; Set optimization level and amount of debug information generated by the compiler
debug_build_flags = -O0 -ggdb3 -g3
debug_init_break = tbreak setup
debug_tool = esp-prog

; default usb upload
upload_protocol = esptool
upload_speed = 460800

[ESP32_develop] ; Develop Only
extends = ESP32
build_type = debug
build_flags =
  ; The option is useless, because the ESP did't wait
  ; and when the usb cable really plugging in, the esp will restart. 
  ; -D OPENKNX_WAIT_FOR_SERIAL=5000
  -D OPENKNX_DEBUG
  ${ESP32.build_flags}

[ESP32_releases] ; Release Only
extends = ESP32
build_flags =
  -D OPENKNX_WATCHDOG
  ${ESP32.build_flags}

; obsolete
[ESP32_UPLOAD_USB]
; upload_protocol = esptool
; upload_speed = 460800

[UPLOAD_ESP_PROG] 
upload_protocol = esp-prog
upload_speed = 921600

[ESP32_4MB]
board = esp32dev
board_build.partitions = lib/OGM-Common/data/partitions/esp32_4mb.csv

[ESP32_8MB]
board = adafruit_feather_esp32_v2
board_build.partitions = lib/OGM-Common/data/partitions/esp32_8mb.csv